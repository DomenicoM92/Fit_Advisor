<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE = edge">
    <meta name="viewport" content="width = device-width, initial-scale = 1">
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    
    <link href="./css/index-style.css" rel="stylesheet">

    <title>Injuries List</title>
    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>            

    <script>
        $(function(){
            $(".navbar").load("./html/nav-bar.html"); 
        });    
    </script> 
</head>

<body>
    <nav class="navbar navbar-black default-color bg-dark"></nav>
    <div class="p-1" style="width: 100%">
        <div class="row" style="width: 90%;margin: 0 auto;">

        </div>
    </div>
    <script>
        jQuery(document).ready(function() {
            //Get URL
            $.urlParam = function(name){
                var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
                return results[1] || 0;
            }
                    
            $.ajax({
                type: "GET",
                url : "/injuryList",
                data : "category="+$.urlParam('category'),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function(data){
                    console.log(data);
                    for(var i=0; i< data.length; i++){
                        $(".row").append(
                            "<div class='m-3' style='width:300px;height:350px;>"+
                            "   <div class='card elegant-color white-text'>"+
                            "       <div class='view'>"+
                            "           <img src='https://mdbootstrap.com/img/Photos/Slides/img%20(125).jpg' class='card-img-top' alt='photo'>"+
                            "           <a href='#'>"+
                            "       <div class='mask rgba-white-slight waves-effect waves-light'></div>"+
                            "          </a>"+
                            "       </div>"+
                            "       <div class='card-body'>"+
                            "           <h4 class='card-title'>"+data[i].title+"</h4>"+
                            "           <b class='card-text white-text'>Last update</b> "+
                            "           <p>"+data[i].timestamp+"</p>"+    
                            "       </div>"+
                            "           <a href='/injuryDetails?title="+data[i].title+"' class='btn btn-outline-white btn-md waves-effect' style='bottom:2px;'>More Details</a>"+
                            "   </div>"+
                            "</div>");
                    }
                },
                error: function(err){
                    console.log(err)
                }
            });
        
        });
    </script>
</body>
    
</html>